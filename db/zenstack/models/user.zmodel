import "./session"
import "./account"
import "./calendar"
import "./bookmark"
import "./comment"

model User {
  id String @id @default(cuid())
  name String?
  email String? @unique
  emailVerified DateTime?
  image String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  accounts Account[]
  sessions Session[]
  calendars Calendar[]
  bookmarks Bookmark[]
  comments Comment[]

  /* Все пользователи могут создавать аккаунт */
  @@allow('create', true)
  /* Все пользователи могут видеть другие аккаунты */
  @@allow('read', true)
  /* Все остальные действия доступны только самому себе */
  @@allow('all', auth() == this)
}

abstract model UserReference {
  userId String
  user User @relation(fields: [userId], references: [id], onDelete: Cascade)
}
