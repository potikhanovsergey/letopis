import "./calendar"
import "./common"

model Event extends ReferenceLink, Description {
  id Int @id @default(autoincrement())
  title String
  date DateTime
  icon String

  calendarId String
  calendar Calendar @relation(fields: [calendarId], references: [id], onDelete: Cascade)

  /* Правила повторяют правила календаря */
  @@allow('read', calendar.visibility != hidden || auth() == calendar.user)
  @@allow('all', auth() == calendar.user)
}
